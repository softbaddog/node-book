<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Duncans' Just-In-Time Donuts</title>
  <script>
    function updateOrder() {
      const TAXRATE = 0.0925;
      const DONUTPRICE = 0.50;
      var numCakeDonuts = parseInt(document.getElementById('cakedonuts').value);
      var numGlazedDonuts = parseInt(document.getElementById('glazeddonuts').value);
      if (isNaN(numCakeDonuts)) numCakeDonuts = 0;
      if (isNaN(numGlazedDonuts)) numGlazedDonuts = 0;
      var subTotal = (numCakeDonuts + numGlazedDonuts) * DONUTPRICE;
      var tax = subTotal * TAXRATE;
      var total = subTotal + tax;
      document.getElementById('subTotal').value = "$" + subTotal.toFixed(2);
      document.getElementById('tax').value = "$" + tax.toFixed(2);
      document.getElementById('total').value = "$" + total.toFixed(2);
    }
    function placeOrder() {
      if (document.getElementById('name').value == "")
        alert("I'm sorry but you must provide your name before submitting an order.");
      else if (document.getElementById("pickupminutes").value == "" || 
        isNaN(document.getElementById('pickupminutes').value))
        alert("I'm sorry but you must provide the number of minute until pick-up" + 
          "before submitting an order");
      else
        form.submit();
    }
  </script>
</head>
<body>
  <div id="frame">
    <form name="orderform" action="donuts.php" method="POST">
        <div class="field">
            name: <input type="text" id="name" name="name" value="">
      </div>
      <div class="field">
        # of cake donuts: <input type="text" id="cakedonuts" name="cakedonuts" value="" onchange="updateOrder();">
      </div>
      <div class="field">
          # of glazed donuts: <input type="text" id="glazeddonuts" name="glazeddonuts" value="" onchange="updateOrder();">
      </div>
      <div class="field">
          Minutes 'till pickup': <input type="text" id="pickupminutes" name="pickupminutes" value="">
      </div>
      <div class="field">
          # subTotal: <input type="text" id="subTotal" name="subTotal" value="" onchange="updateOrder();">
      </div>
      <div class="field">
          # tax: <input type="text" id="tax" name="tax" value="" onchange="updateOrder();">
      </div>
      <div class="field">
          total: <input type="text" id="total" name="total" value="" onchange="updateOrder();">
      </div>
      <div class="field">
          <input type="button" value="Place Order" onclick="placeOrder(this.form);">
      </div>
    </form>
  </div>
</body>
</html>